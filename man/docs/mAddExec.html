<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	  <head>
  <title>Montage User Documentation</title>
<!--#include virtual="include/header.html"-->

<!-- BEGIN DOCUMENTATION TITLE -->
<div id="wrapper">


<h1>mAddExec</h1>

<div id="usage">
<dl class="description">
  <dt>Description:</dt>
  <dd>Builds a series of outputs (which together make up a tiled output) through multiple executions of the mAdd modules.</dd>
</dl>

<dl class="syntax">
  <dt>Syntax:</dt>
  <dd>mAddExec [-p <i>imgdir</i>] [-n(o-areas)] [-a mean|median] [-e(xact-size)] [-d <i>level</i>] [-s <i>statusfile</i>] [-x <i>TilesSizeAxis0</i>] [-y <i>TileSizeAxis1</i>] [-o <i>OverlapAxis0</i>] [-q <i>OverlapAxis1</i>] <b>images.tbl template.hdr tiledir out.fits</b></dd>
</dl>

<p class="dochead">Switches:</p>
<dl class="args">
  <dt>-p <i>imgdir</i></dt>
  <dd>Specifies path to directory containing reprojected images.  If the -p switch is not included, mAdd will look for the input images in the current working directory.</dd>

  <dt>-n</dt>
  <dd>Co-addition ignores weighting by pixel areas and performs coaddition based only on pixel postions. Will not output an area image for the output image.</dd>

  <dt>-a <i>type</i></dt>
  <dd>Select type of averaging to be done on accumulated pixel values (either <b>mean</b> or <b>median</b>). </dd>

  <dt>-e </dt>
  <dd>Enables exact size mode. The output image will match the header template exactly, instead of shrinking the output to fit the data.</dd>

  <dt>-d <i>level</i></dt>
  <dd>Turns on debugging to the specified level (1-3).</dd>

  <dt>-s <i>statusfile</i></dt>
  <dd>mAdd output and errors will be written to <i>statusfile</i> instead of stdout.</dd>
</dl>

<p class="dochead">Arguments:</p>
<dl class="args">
  <dt>images.tbl</dt>
  <dd>ASCII table (generated by mImgtbl) containing metadata for all images to be coadded.</dd>

  <dt>template.hdr</dt>
  <dd>FITS header template to be used in generation of output FITS</dd>
  <dt>tiledir</dt>
  <dd>Directory to contain output tile images and header templates</dd>


  <dt>out.fits</dt>
  <dd>Prefix for output tile images</dd>
</dl>


<dl class="description">
<dt>Results:</dt>
  <dd>If successful, mAddExec creates a set of FITS tiles covering the area described in <span class="file">template.hdr</a>, as well as matching "tiled" header files for each output tile.</dd>

</dl>

<a name="ex"></a><p class="dochead">Examples:</p>

<p>The following example runs <span class="file">mAddExec</span> on <a href="examples/mAdd/images.tbl">this set</a> of images, generating a set of tiles conforming to the size and overlap specified on the command line: </p>

<dl class="example">
  <dt>$ mAddExec -p proj -x 1000 -y 1000 images.tbl template.hdr tiles tile.fits</dt>
  <dd>[struct stat="OK", mTileHdr_count=4, mTileHdr_failed=0, mTileHdr_warning=0, mAdd_count=4, mAdd_failed=0, mAdd_warning=0, time=8]</dd>
  <dt>$ ls tiles</dt>
  <dd>tile_0_0.hdr<br>tile_0_0.fits<br>tile_0_0_area.fits<br>tile_0_1.hdr<br>tile_0_1.fits<br>tile_0_1_area.fits<br>tile_1_0.hdr<br>tile_1_0.fits<br>tile_1_0_area.fits<br>tile_1_1.hdr<br>tile_1_1.fits<br>tile_1_1_area.fits</dd>
</dl>

<p class="dochead">Return Codes:</p>
<ul class="returncodes">
  <li>[struct stat = "OK", time=<i>time</i>]</li>
  <li>[struct stat="ERROR", msg="Usage: mAddExec [-p imgdir] [-n(o-areas)] [-a mean|median] [-e(xact-size)] [-d level] [-s statusfile] [-x TilesSizeAxis0] [-y TileSizeAxis1] [-o OverlapAxis0] [-q OverlapAxis1] <b>images.tbl template.hdr out.fits</b></dd>
  <li>[struct stat="ERROR", msg="MPI initialization failed"]</li>
  <li>[struct stat="ERROR", msg="Invalid argument for -x flag"]</li>
  <li>[struct stat="ERROR", msg="Invalid argument for -y flag"]</li>
  <li>[struct stat="ERROR", msg="Invalid argument for -o flag"]</li>
  <li>[struct stat="ERROR", msg="Invalid argument for -q flag"]</li>
  <li>[struct stat="ERROR", msg="Invalid argument for -a flag"]</li>
  <li>[struct stat="ERROR", msg="Cannot open status file: <i>statusfile</i>"]</li>
  <li>[struct stat="ERROR", msg="command line option was not integer"]<span class="explanation">(Number of pixels must be positive integer)</li>
  <li>[struct stat="ERROR", msg="option cannot be negative"]<span class="explanation">(Number of pixels must be positive integer)</li>
  <li>[struct stat="ERROR", msg="Invalid image metadata file: <i>filename</i>"]</li>
  <li>[struct stat="ERROR", msg="Need columns: cntr,fname, crpix1, crpix2, cdelt1, cdelt2, naxis1, naxis2, crval1, crval2 in image list"]<span class="explanation">(missing columns in image metadata table)</span></li>
  <li>[struct stat="ERROR", msg="Memory allocation failed"]</li>
  <li>[struct stat="ERROR", msg="Too many open files"]</li>
  <li>[struct stat="ERROR", msg="Input wcsinit() failed."]</li>
  <li>[struct stat="ERROR", msg="Failed to allocate enough memory for output arrays"]</li>
  <li>[struct stat="ERROR", msg="Bad WCS in header template."]</li>
  <li>[struct stat="ERROR", msg="Template file not found."]</li>
  <li>[struct stat="ERROR", status=<i>stat</i>, msg="<i>FITS library error</i>"]</li>
  <li>[struct stat="ERROR", msg="<i>general error message</i>"]</li>
</ul>
</div> 


</div>
<!--#include virtual="include/footer.html"-->
