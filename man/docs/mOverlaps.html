<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	  <head>
	    <title>Montage User Documentation</title>
	    <!--#include virtual="include/header.html"-->
<div id="wrapper">
<h1>mOverlaps</h1>

<div id="usage">

<dl class="description">
  <dt>Description:</dt>
  <dd>Analyze an image metadata table to determine a list of overlapping images.  Each image is compared with every other image to determine all overlapping image pairs.  A pair of images are deemed to overlap if any pixel around the perimeter of one image falls within the boundary of the other image.</dd>
</dl>

<dl class="syntax">
  <dt>Syntax:</dt>
  <dd>mOverlaps [-e] [-d <i>level</i>] [-s <i>statusfile</i>] <b>images.tbl diffs.tbl</b></dd>
</dl>

<p class="dochead">Switches:</p>
<dl class="args">
  <dt>-e</dt>
  <dd>Enables 'exact' overlaps mode, as opposed to the default approximate algorithm. The default mode uses great-circle connecting lines between image corners to determine which images overlap. Exact mode will instead check the edge pixels of every image to determine which pixels are inside the others.<br><br>
Although the default mode will occasionally report some incorrect overlaps, this is not a concern since <span class="file">mDiff</span> will detect and ignore these false positive results when processing the table. </dd>
  <dt>-d <i>level</i></dt>
  <dd>Turns on debugging to the specified level (1 or 2)</dd>
  <dt>-s <i>statusfile</i></dt>
  <dd>Output and errors are sent to <i>statusfile</i> instead of to stdout</dd>
</dl>

<p class="dochead">Arguments:</p>
<dl class="args">
  <dt>images.tbl</dt>
  <dd>Table of image metadata generated by <span class="file">mImgtbl</span>.</dd>
  <dt>diffs.tbl</dt>
  <dd>Path of output table to be generated containing overlap information.</dd>
</dl>

<dl class="description">
  <dt>Results:</dt>
  <dd>Output table contains overlap information for each pair of overlapping images.  The first two columns are integer identifiers for the images from <span class="file">images.tbl</span>; the second two give their filenames, and the final column shows the filename of the FITS file that will be generated using <span class="file">mDiffExec</span>.</dd>
</dl>

<p class="dochead">Examples:</p>

<p>The following example looks at a list of 16 images, described in <a href="examples/mOverlaps/images.tbl">images.tbl</a>, and calculates which images overlap:</p>

<dl class="example">
  <dt>$ mOverlaps images.tbl diffs.tbl</dt>
  <dd>[struct stat="OK", count=42]</dd>
</dl>

<p>Output file: <a href="examples/mOverlaps/diffs.tbl">diffs.tbl</a>.</p>

<p class="dochead">Return Codes:</p>
<ul class="returncodes">
  <li>[struct stat="OK", count<i>num-overlaps</i>]</li>   
  <li>[struct stat="ERROR", msg="Usage: mOverlaps [-e] [-d level] [-s statusfile] images.tbl diffs.tbl"]</li>   
  <li>[struct stat="ERROR", msg="Cannot open status file: <i>statusfile</i>"]</li>   
  <li>[struct stat="ERROR", msg="Failed to open output <i>filename</i>"]</li>   
  <li>[struct stat="ERROR", msg="Invalid image metadata file: <i>filename</i>"]</li>   
  <li>[struct stat="ERROR", msg="Not enough information to determine coverages (CDELTs or CD matrix)"]</li>   
  <li>[struct stat="ERROR", msg="Need columns: cntr ctype1 ctype2 nl ns crval1 crval2 crpix1 crpix2 cdelt1 cdelt2 crota2 fname (equinox optional)"] <span class="explanation">(columns missing from image metadata table)</span></li>   
  <li>[struct stat="ERROR", msg="Bad WCS for image <i>n</i>"]</li>   
</ul>
</div>
</div>
<!--#include virtual="include/footer.html"-->
