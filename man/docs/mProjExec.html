<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	  <head>
	    <title>Montage User Documentation</title>
	    <!--#include virtual="include/header.html"-->
<div id="wrapper">	    
<h1>mProjExec</h1>

<div id="usage">

<dl class="description">
  <dt>Description:</dt>
  <dd>An executive which runs <a href="mProject.html"><span class="file">mProject</span></a> (or, if possible for the input/output projections, <a href="mProjectPP.html"><span class="file">mProjectPP</span></a>) for each image in an image metadata table.   In the case of data cubes, <a href="mProjectCube.html"><span class="file">mProjectCube</span></a> will be used.</dd>
</dl>

<dl class="syntax">
  <dt>Syntax:</dt>
  <dd>mProjExec [-p <i>rawdir</i>] [-d] [-e] [-X] [-b <i>border</i>] [-r <i>restartrec</i>] [-s <i>statusfile</i>] [-x scaleColumn] <b>images.tbl template.hdr projdir stats.tbl</b></dd>
 </dl> 

<p class="dochead">Switches:</p>
<dl class="args">
  <dt>-p <i>rawdir</i></dt>
  <dd>Specifies the path to the directory containing the images to be reprojected.  If the -p switch is not included, <span class="file">mProjExec</span> looks for the images in the current working directory.</dd>
  <dt>-d</dt>
  <dd>Turns on debugging</dd>
  <dt>-e</dt>
  <dd>Flag indicating output image should exactly match the FITS header template, and not crop off blank pixels</dd>
  <dt>-X</dt>
  <dd>Force reprojection of whole images, even if they exceed the area of the FITS header template</dd>
  <dt>-b <i>border</i></dt>
  <dd>Ignore <i>border</i> width of pixels around edge of images</dd>
  <dt>-r <i>restartrec</i></dt>
  <dd>Allows restart at record number <i>restartrec</i>, if <span class="file">mProjExec</span> exits upon an error</dd>
  <dt>-s <i>statusfile</i></dt>
  <dd>Output and errors are written to statusfile instead of being written to stdout.</dd>
  <dt>-x <i>scaleColumn</i></dt>
  <dd>Turn on flux rescaling (e.g. magnitude zero point correction): <i>scaleColumn</i> is the name of a column in <i>images.tbl</i> which contains scale information.</dd>
</dl>


<p class="dochead">Arguments:</p>
<dl class="args">
  <dt>images.tbl</dt>
  <dd>ASCII table (generated by <span class="file">mImgtbl</span>) containing metadata for all images to be reprojected.</dd>
  <dt>template.hdr</dt>
  <dd>FITS <a href="headers.html">header template</a> to be used in generation of output FITS.</dd>
  <dt>projdir</dt>
  <dd>Directory in which to create reprojected images.</dd>
  <dt>stats.tbl</dt>
  <dd>Name of table for output statistics (time of each reprojection, or error messages).</dd>
</dl>

<dl class="description">
  <dt>Results:</dt>
  <dd><span class="file">[struct stat="OK", count=16, failed=0, nooverlap=0]</span></dd>
  <dd>For each input file <span class="file">name.fits</span> in the table <span class="file">images.tbl</span>, <span class="file">mProjExec</span> creates a corresponding <span class="file">name.fits</span> and <span class="file">name_area.fits</span> in the directory <span class="file">projdir</span>.</dd>
  <dd><i>nimages</i> is the number of images successfully processed, <i>nfailed</i> is the number of images mProject was unable to process, and <i>noutside</i> is the number of images that did not overlap with the given <span class="file">template.hdr</span>.</dd>
  <dd>The file <span class="file">stats.tbl</span> is an ASCII table containing the filename, status, and time for each file.</dd>
</dl>

<p class="dochead">Examples</p>

<p>The following example runs <span class="file">mProjExec</span> on a directory containing 16 images. The -f switch specifies that <span class="file">mProjExec</span> will use <span class="file">mProjectPP</span> to reproject the files, as opposed to <span class="file">mProject</span>. Relevant files are <a href="examples/mProjExec/images.tbl">images.tbl</a>, generated by <span class="file">mImgtbl</span>, and <a href="examples/mProjExec/template.hdr">template.hdr</a>.  Files will be created in the directory <span class="file">projdir</span>.</p>

<dl class="example">
  <dt>$ mProjExec -p raw images.tbl template.hdr proj stats.tbl</dt>
  <dd>[struct stat="OK", count=16, failed=0, nooverlap=0]</dd>
</dl>

<p>See output file <a href="examples/mProjExec/stats.tbl"><span class="file">stats.tbl</span></a>.</p>

<p class="dochead">Return Codes:</p>
<ul class="returncodes">
  <li>[struct stat="OK", count=<i>nimages</i>, failed=<i>nfailed</i>, nooverlap=<i>noutside</i>]</li>   
  <li>[struct stat="ERROR", msg="Usage: mProjExec [-p rawdir] [-d] [-e(xact)] [-X(whole image)] [-b border] [-r restartrec] [-s statusfile] [-x scaleColumn] images.tbl template.hdr projdir stats.tbl"]</li>   
  <li>[struct stat="ERROR", msg="MPI initialization failed"]</li>
  <li>[struct stat="ERROR", msg="Path (<i>outdir</i>) is not a directory"]</li>
  <li>[struct stat="ERROR", msg="Restart index value string <i>n</i> cannot be interpreted as an integer"]</li>   
  <li>[struct stat="ERROR", msg="Restart index value <i>n</i> must be greater than or equal to zero"]</li>   
  <li>[struct stat="ERROR", msg="Cannot open status file: <i>statusfile</i>"]</li>   
  <li>[struct stat="ERROR", msg="Usage: Image metadata file (<i>filename</i>) does not exist"]</li>   
  <li>[struct stat="ERROR", msg="Usage: Output directory (<i>filename</i>) does not exist"]</li>   
  <li>[struct stat="ERROR", msg="Can't open output file."]</li>   
  <li>[struct stat="ERROR", msg="Can't open tmp status file."]</li>   
  <li>[struct stat="ERROR", msg="Can't delete tmp status file."]</li>   
  <li>[struct stat="ERROR", msg="Need column fname in input"] <span class="explanation">(column missing from image metadata table)</span></li>   
  <li>[struct stat="ERROR", msg="Need column <i>scaleCol</i> in input"] <span class="explanation">(scale column as specified missing from image metadata table)</span></li>   
  <li>[struct stat="ERROR", msg="Output would overwrite input"]</li>   
  <li>[struct stat="ERROR", msg="Template file <i>template.hdr</i> not found"]</li>   
  <li>[struct stat="ERROR", msg="Output wcsinit() failed"]</li>   
  <li>[struct stat="ERROR", msg="mProject or mProjectPP error"]</li>   
</ul>

</div>
</div>
<!--#include virtual="include/footer.html"-->
