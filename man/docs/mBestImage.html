<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	  <head>
	    <title>Montage User Documentation</title>
	    <!--#include virtual="include/header.html"-->
<div id="wrapper">
<h1>mBestImage</h1>

<div id="usage">
<a name="usage"></a>
<dl class="description">
  <dt>Description:</dt>
  <dd>Given a list of images and a position on the sky, determine which image covers the location "best" (i.e., the one where the position is farthest from the nearest edge).</dd>
</dl>

<dl class="syntax">
  <dt>Syntax:</dt>
  <dd>mBestImage [-d <i>level</i>] <b>images.tbl ra dec</b></dd>
</dl>

<p class="dochead">Switches:</p>
<dl class="args">
  <dt>-d <i>debug</i></dt>
  <dd>Turn on debugging to the specified level (1 or 2)</dd>
</dl>

<p class="dochead">Arguments:</p>
<dl class="args">
  <dt>images.tbl</dt>
  <dd>Input table of image metadata (as generated by <a href="mImgtbl.html"><span class="file">mImgtbl</span></a>).</dd>
  <dt>ra</dt>
  <dd>RA of location of interest (in degrees)
  <dt>dec</dt>
  <dd>Declination of location of interest (in degrees)
</dl>

<dl class="description">
  <dt>Results:</dt>
  <dd><span class="file">[struct stat="OK", file="<i>filename</i>", edgedist=<i>distance</i>]<br><i>or</i><br><span class="file">[struct stat="OK", file="<i>filename</i>", url="<i>fileurl</i>", edgedist=<i>distance</i>]</dd>
  <dd>where <i>filename</i> is the name of the "best" image found in <i>images.tbl</i> and <i>distance</i> is measured from the point of interest to the nearest edge of the image.  If the input table included a URL column, the output message will also include the image's URL.</dd>
</dl>

<a name="ex"></a><p class="dochead">Examples:</p>

<p>Given a table of image metadata describing images covering a 0.5 by 0.5 degree area around m31 (<a href="examples/mBestImage/2mass_m31_j.tbl"><span class="file">2mass_m31_j.tbl</span></a>), narrow it down to the image which includes the best coverage of one particular location:</p>

<dl class="example">
  <dt>mBestImage 2mass_m31_j.tbl 10.7 41.2</dt>
  <dd>[struct stat="OK", file="2mass-atlas-971024n-j0080033.fits", edgedist=0.008436]</dd>
</dl>

<p class="dochead">Return Codes:</p>
<ul class="returncodes">
  <li>[struct stat="OK", file="<i>filename</i>", url="<i>fileurl</i>", edgedist=<i>distance</i>"]</li>
  <li>[struct stat="OK", file="<i>filename</i>", edgedist=<i>distance</i>"]</li>
  <li>[struct stat="ERROR", msg="Usage: BestImage [-d level] images.tbl ra dec"]</li>
  <li>[struct stat="ERROR", msg="Invalid image metadata file: <i>images.tbl</i>"]</li>
  <li>[struct stat="ERROR", msg="Need columns: cntr and fname; ctype1 ctype2 nl ns crval1 crval2 crpix1 crpix2 cdelt1 cdelt2 and crota2 or cd matrix / ra dec ra1 ... dec4"] <span class="explanation">(images.tbl missing required columns)</span></li>
  <li>[struct stat="ERROR", msg="Bad WCS for image <i>fitsfile</i>"] <span class="explanation">(Unable to determine position information for fitsfile)</span></li>
  <li>[struct stat="ERROR", msg="No image covers this position."]</li>
</ul>

</div>
</div>

<!--#include virtual="include/footer.html"-->
