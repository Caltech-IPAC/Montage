<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
     <title>Montage User Documentation</title>
 <!--#include virtual="include/header.html"-->
 <div id="wrapper">
<h1>mSubset</h1>

<div id="usage">

<dl class="description">
  <dt>Description:</dt>
  <dd>Generates a table of images that is a subset of the input table, containing only those images that cover the area defined by a given FITS header.</dd>
</dl>

<dl class="syntax">
  <dt>Syntax:</dt>
  <dd>mSubset [-d <i>level</i>] [-f] [-s <i>statusfile</i>] <b>images.tbl template.hdr subset.tbl</b></dd>
</dl>

<p class="dochead">Switches:</p>
<dl class="args">
  <dt>-d <i>level</i></dt>
  <dd>Turns on debugging to the specified level (1-3).</dd>
  <dt>-f</dt>
  <dd>Fast mode - input file must include corners (-c flag in <a href="mImgtbl.html">mImgtbl</a>) to utilize this mode.</dd>
  <dt>-s <i>statusfile</i></dt>
  <dd>Output and errors are sent to <i>statusfile</i> instead of to stdout</dd>
</dl>

<p class="dochead">Arguments:</p>
<dl class="args">
  <dt>images.tbl</dt>
  <dd>ASCII table (generated by <a href="mImgtbl.html"><span class="file">mImgtbl</span></a>) containing metadata for image collection.</dd>
  <dt>template.hdr</dt>
  <dd>FITS <a href="headers.html">header template</a> defining the area of interest.</dd>
  <dt>subset.tbl</dt>
  <dd>Path to output table, which will contain only those FITS images covering the area defined by <i>template.hdr</i>.</dd>
</dl>

<dl class="description">
  <dt>Results:</dt>
  <dd><span class="file">[struct stat="OK", count=<i>nin</i>, nmatches=<i>nout</i>]</dd>
  <dd>where <i>nin</i> is the number of rows found in <i>images.tbl</i>, and <i>nmatches</i> is the number of rows in <i>subset.tbl</i>, which includes only those images that overlap the area defined by <i>template.hdr</i>.</dd>

<p class="dochead">Examples</p>
<dl class="example">
  <dt>$ mSubset images.tbl subset.hdr subset.tbl</dt>
  <dd>[struct stat="OK", count=5, nmatches=3]</dd>
</dl>

<p><span class="file">subset.tbl</span> now contains 3 of the 5 images from <span class="file">images.tbl</span>, excluding the ones that lie outside the area defined by <span class="file">subset.hdr</span>.</p>

<p class="dochead">Return Codes:</p>
<ul class="returncodes">
  <li>[struct stat="OK", count=<i>nin</i>, nmatches=<i>nout</i>]</li>   
  <li>[struct stat="ERROR", msg="Usage: mSubset [-d level] [-f] [-s statusfile] images.tbl template.hdr subset.tbl"]</li>   
  <li>[struct stat="ERROR", msg="Cannot open status file: <i>statusfile</i>"]</li>

  <li>[struct stat="ERROR", msg="Failed to open output <i>filename</i>"]</li>   
  <li>[struct stat="ERROR", msg="Invalid image metadata file: <i>filename</i>"]</li>   
  <li>[struct stat="ERROR", msg="Not enough information to determine coverages (corners, CDELTs or CD matrix)"]</li>   
  <li>[struct stat="ERROR", msg="Need columns: cntr ctype1 ctype2 nl ns crval1 crval2 crpix1 crpix2 cdelt1 cdelt2 crota2 fname (equinox optional)"] <span class="explanation">(columns missing from image metadata table)</span></li>   
  <li>[struct stat="ERROR", msg="Bad WCS for image <i>n</i>"]</li>   
  <li>[struct stat="ERROR", msg="Output wcsinit() failed."]</li>   
  <li>[struct stat="ERROR", msg="Template file not found."]</li>
</ul>

</div>
</div>
<!--#include virtual="include/footer.html"-->
