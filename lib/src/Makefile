all:
	(cd bzip2-1.0.6 && $(MAKE) && cp libbz2.a ../.. && cp bzlib.h ../../include)
	(cd cfitsio-3.49 && ./configure --disable-curl && $(MAKE) && cp libcfitsio.a ../.. && cp *.h ../../include)
	(cd cmd && $(MAKE) && $(MAKE) install)
	(cd coord && $(MAKE) && $(MAKE) install)
	(cd mtbl && $(MAKE) && $(MAKE) install)
	(cd svc && $(MAKE) && $(MAKE) install)
	(cd json && $(MAKE) && $(MAKE) install)
	(cd boundaries && $(MAKE) && $(MAKE) install)
	(cd pixbounds && $(MAKE) && $(MAKE) install)
	(cd www && $(MAKE) && $(MAKE) install)
	(cd wcssubs3.9.0_montage && $(MAKE) && cp libwcs.a ../.. && cp *.h ../../include)
	(cd two_plane_v1.1 && $(MAKE) && $(MAKE) install)
	(cd lodepng_20140823 && $(MAKE) && $(MAKE) install)
	(cd jpeg-8b && ./configure --with-pic && $(MAKE) && cp .libs/libjpeg.a ../.. && cp jpeglib.h jconfig.h jmorecfg.h ../../include)
	(cd freetype-2.9.1 && ./configure --prefix=`pwd`/../../freetype --without-png --without-zlib --without-bzip2 --without-harfbuzz && $(MAKE) && $(MAKE) install)
	(cd .. && ranlib *.a)
	chmod 644 ../include/*.h

clean:
	rm -rf ../include/* ../freetype ../*.a
	(cd bzip2-1.0.6 && $(MAKE) clean)
	test ! -e cfitsio-3.49/Makefile || (cd cfitsio-3.49 && $(MAKE) clean && rm -rf config.log config.cache config.status lib)
	(cd cmd && $(MAKE) clean)
	(cd coord && $(MAKE) clean)
	(cd mtbl && $(MAKE) clean)
	(cd svc && $(MAKE) clean)
	(cd json && $(MAKE) clean)
	(cd boundaries && $(MAKE) clean)
	(cd www && $(MAKE) clean)
	(cd pixbounds && $(MAKE) clean)
	(cd www && $(MAKE) clean)
	(cd wcssubs3.9.0_montage && $(MAKE) clean)
	(cd two_plane_v1.1 && $(MAKE) clean)
	(cd lodepng_20140823 && $(MAKE) clean)
	test ! -e jpeg-8b/Makefile || (cd jpeg-8b && $(MAKE) clean)
	(cd freetype-2.9.1 && $(MAKE) distclean && rm -rf objs/libfreetype.la  objs/.libs)
